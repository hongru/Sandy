<!DOCTYPE html>
<html>
<meta charset="utf-8" />
<script src="../../build/sandy.0.1.js"></script>
<style>
html,body {background: black; margin:0}
</style>
<script>
var engine, cube, light;

window.onload = function() {

    engine = new Sandy.Engine();  
    engine.setClearColor(Sandy.Color.black);
    engine.scene.ambient = new Sandy.Color(.5, .5, .5, 1);

    light = new Sandy.Transform();
    light.light = new Sandy.Light(Sandy.DIRECT);
    light.light.color = new Sandy.Color(1, 1, 1, 1);
    light.light.direction = new Sandy.V3(1, 0, 1).norm();
    
    sun = new Sandy.Transform();
    sun.light = new Sandy.Light(Sandy.HEMISPHERE);
    sun.light.color = new Sandy.Color(1, 1, 1, 1);
    sun.position = new Sandy.V3(0, 1, 0);
    
    crMat = Sandy.builtinShaders.fetch("Phong");
    crMat.color = new Sandy.Color(1, 1, 1, 1);
    crMat.specularIntensity = 0.1;
    crMat.shininess = 0.1;
    crMat.colorTexture = new Sandy.Texture("models/crate256.jpg");
    crMat.hasColorTexture = true;
    //tr
    cr = new Sandy.Transform();
    cr.position.x = 0.1;
    cr.position.z = 0.5;
    Sandy.loader.loadJSON("models/crate.js", function(j) {
        cr.geometry = new Sandy.Mesh(j);
    });
    cr.renderer = crMat;

    camera = new Sandy.Transform();
    camera.camera = new Sandy.Camera();
    camera.position.z = 4;
    engine.camera = camera;

    //engine.scene.add(camera, cube, light);
    engine.scene.add(sun);
    engine.scene.add(camera, cr, light);

    draw();
}

function draw() {
    //cube.rotation.x += Math.PI * Sandy.time.deltaTime / 6000;
    //cube.rotation.y += Math.PI * Sandy.time.deltaTime / 3000;
    cr.rotation.x += Math.PI * Sandy.time.deltaTime / 6000;
    cr.rotation.y += Math.PI * Sandy.time.deltaTime / 3000;
    
    engine.render();
    requestAnimationFrame(draw);
}
</script>

</html>